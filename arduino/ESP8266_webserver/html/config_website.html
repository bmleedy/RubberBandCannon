<!DOCTYPE html>
<html>
  <head>
    <style>
    input {
      width: 120px;
      height: 20px;
    }
    </style>
    <title>Rubber Band Cannon Setup Page</title>
    <a href="targeting">Targeting page</a>
  <body>
    <h1>Network Status</h1>
    SSID: <span class="ssid__"></span><br>
    Connected?  <span class="conctd"></span><br>
    IP: <span class="ipaddr"></span><br>
    MAC: <span class="macadr"></span><br>
    Port: <span class="port__"></span><br>
    
    <h1>Network Setup</h1>
        <strong>SSID</strong>: <input class="ssid__" id="ssid__" type="text" size="15"></input>
        <br>
        <strong>Password</strong>: <input class="paswrd" id="paswrd" type="password" size="15"></input>
                                   <input type="button" onclick="setpwd()" value="Submit"></input>
        </li>
      </ul>
  </body>
  <footer>
    <script language="javascript">
      var prefetch_data={
//FETCHDATA_START
//      all data between the quad_slashes and "//END" will be replaced with a callback to fill the output queue with prefetch data.
                           ssid__:"leedy",
                           conctd:true,
                           ipaddr:"192.168.1.25",
                           macadr:"DE:AD:BE:EF:AB:BA",
                           port__:8080,
//FETCHDATA_END
      };
      function render_prefetch(key,value){
        fieldstofill=document.getElementsByClassName(key);
        for(var i=0;i<fieldstofill.length;i++){
          if(fieldstofill[i].tagName.toLowerCase()=="span")
            fieldstofill[i].textContent=value;
          else
            fieldstofill[i].value=value;
        }
      }
      keys=Object.keys(prefetch_data);
      for(var i=0;i<keys.length;i++)
        render_prefetch(keys[i],prefetch_data[keys[i]]); 
      function setpwd(){
        var http = new XMLHttpRequest(),
        pwd=document.getElementById("paswrd").value,
        sid=document.getElementById("ssid__").value,
        params;
        params="ssid__="+sid+","+pwd+"\\n";
        http.open("POST","settings/ssid__",true);
        console.log("setting password: "+params);
        if(pwd && sid){
          http.send(params);
          http.onload=function(){
            alert(http.responseText);
          }
        }else{
          alert("ERROR: Blank SSID or PWD");
        }
      }
    </script>
  </footer>
</html>
