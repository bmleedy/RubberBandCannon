<!DOCTYPE html>
<html>
  <head>
    <style>
    input {
      width: 120px;
      height: 20px;
    }
    </style>
    <title>Rubber Band Cannon Setup Page</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <body>
    <h1>Network Status</h1>
      <ul>
        <li>SSID: <span class="ssid__"></span></li>
        <li>Connected?  <span class="conctd"></span></li>
        <li>IP: <span class="ipaddr"></span></li>
        <li>MAC: <span class="macadr"></span></li>
        <li>Port: <span class="port__"></span></li>
      </ul>
    <h1>Network Setup</h1>
      <ul>
        <li>New WiFi SSID: <input class="ssid__" id="ssid_box" type="text" size="15"></input>
                           <input type="button" onclick="submitchange('ssid__')" value="Submit"></input>
        </li>
        <li>Set WiFi Password: <input class="paswrd" type="password" size="15"></input>
                               <input type="button" onclick="submitchange('paswrd')" value="Submit"></input>
        </li>
      </ul>
  </body>
  <footer>
    <script language="javascript">
      var prefetch_data = {
//FETCHDATA_START
//      all data between the quad_slashes and "//END" will be replaced with a callback to fill the output queue with prefetch data.
//      Fake data for testing - insert prefetch data here
                           ssid__:"leedy",
                           conctd:true,
                           ipaddr:"192.168.1.25",
                           macadr:"DE:AD:BE:EF:AB:BA",
                           port__:8080,
//FETCHDATA_END
      };
//    //change content or values for tags with prefetch classes
      function render_prefetch(key,value){
        fieldstofill = document.getElementsByClassName(key);
        for (var i=0; i < fieldstofill.length; i++){
          if(fieldstofill[i].tagName.toLowerCase() == "span" ){
            fieldstofill[i].textContent = value;
          } else {
            fieldstofill[i].value = value;
          }
        }
      }
//    //For each prefetched data element, render it into the page
      keys = Object.keys(prefetch_data);
      for(var i=0; i < keys.length; i++){
        render_prefetch(keys[i],prefetch_data[keys[i]]); 
      }
      function submitchange(form_id) {
//      https://stackoverflow.com/questions/18169933/submit-form-without-reloading-page
        console.log("submitting form " + form_id);
        var http = new XMLHttpRequest();
//        http.open("POST", "settings/" + form_id, true);
//        http.setRequestHeader("Content-type","application/x-www-form-urlencoded");
//        var params = form_id + "=" + document.getElementById(form_id).value;
//        http.send(params);
//        http.onload = function() {
//          alert(http.responseText);
//        }
      }
    </script>
  </footer>
</html>
