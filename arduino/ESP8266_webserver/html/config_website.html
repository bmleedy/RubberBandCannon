<!DOCTYPE html>
<html>
  <head>
    <style>
    input {
      width: 120px;
      height: 20px;
    }
    </style>
    <title>Rubber Band Cannon Setup Page</title>
    <a href="targeting">Targeting page</a>
  <body>
    <h1>Network Status</h1>
      SSID:<span class="ssid__"></span><br>
      Connected?<span class="conctd"></span><br>
      IP:<span class="ipaddr"></span><br>
      MAC:<span class="macadr"></span><br>
      Port:<span class="port__"></span><br>
    
    <h1>WiFi Setup</h1>
      <strong>SSID</strong>:<input class="ssid__" id="ssid__" type="text" size="15"></input>
      <br>
      <strong>Password</strong>:<input class="paswrd" id="paswrd" type="password" size="15"></input>
                                <input type="button" onclick="setpwd()" value="Submit"></input>
  </body>
  <footer>
    <script language="javascript">
      var pf_data={
//FETCHDATA_START
//      all data between the quad_slashes and "//END" will be replaced with a callback to fill the output queue with prefetch data.
                           ssid__:"leedy",
                           conctd:true,
                           ipaddr:"192.168.1.25",
                           macadr:"DE:AD:BE:EF:AB:BA",
                           port__:8080,
//FETCHDATA_END
      };
      function pftch(key,value){
        flds=document.getElementsByClassName(key);
        for(var i=0;i<flds.length;i++){
          if(flds[i].tagName.toLowerCase()=="span"){
            flds[i].textContent=value;
            flds[i].style.color="Red";
          }
          else{
            flds[i].value=value;
          }
        }
      }
      k=Object.keys(pf_data);
      for(var i=0;i<k.length;i++)
        pftch(k[i],pf_data[k[i]]); 
      function setpwd(){
        var http = new XMLHttpRequest(),
        pwd=document.getElementById("paswrd").value,
        sid=document.getElementById("ssid__").value;
        var params='ssid__="'+sid+'","'+pwd+'"\n';
        http.open("POST","settings/ssid__",true);
        if(pwd && sid){
          http.send(params);
          http.onload=function(){
            alert(http.responseText);
          }
        }else{
          alert("ERR:Blank field");
        }
      }
    </script>
  </footer>
</html>
